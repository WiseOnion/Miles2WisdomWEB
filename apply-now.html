<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Apply Now — Miles 2 Wisdom Counseling Services</title>
<meta name="description" content="Join our team — apply to Miles 2 Wisdom Counseling Services.">
<meta property="og:title" content="Apply Now — Miles 2 Wisdom Counseling Services">
<meta property="og:description" content="Join our compassionate team of mental health professionals.">
<meta property="og:type" content="website">
<meta property="og:image" content="Logo.jpg">
<meta name="theme-color" content="#A9C9FF">

<!-- Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Lora:wght@400;600;700&display=swap" rel="stylesheet">

<!-- Main Stylesheet -->
<link rel="stylesheet" href="styles.css">

<!-- Micro CSS for polished success / error visuals (keeps your look) -->
<style>
  .success-card, .error-card { display:none; opacity:0; transform: translateY(10px); transition: opacity .36s ease, transform .36s ease; }
  .success-card.visible, .error-card.visible { display:block; opacity:1; transform: translateY(0); }
  .file-info { font-size: 0.9rem; color: var(--muted); margin-top: 6px; }
  .small-note { font-size: 0.9rem; color: var(--muted); }
  .submit-btn[disabled] { opacity:0.7; cursor:not-allowed; }
  .error-text { color:#ef4444; font-weight:700; margin-top:8px; }
</style>
</head>
<body>

<!-- Header -->
<header>
  <div class="container nav">
    <a class="brand" href="index.html">
      <img src="Logo.jpg" alt="Miles 2 Wisdom Logo" class="logo">
      <div class="brand-text">
        <h1>Miles 2 Wisdom Counseling</h1>
        <div class="tagline">Guiding You from Where You Are to Where You Want to Be</div>
      </div>
    </a>
    <nav aria-label="Main Navigation">
      <button class="menu-btn" aria-expanded="false" aria-controls="menu">☰</button>
      <ul id="menu" role="menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="meet-the-team.html">Team</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="book-a-consultation.html" class="btn">Book a Consultation</a></li>
      </ul>
    </nav>
  </div>
</header>

<main>
  <div class="form-container">
    <h1 class="page-title">Join Our Team</h1>
    <p class="lead">We're always looking for compassionate, skilled people to join our team. Fill out the form below and attach your resume. We'll review applications and contact qualified candidates.</p>

    <div class="form-grid apply-form-grid">
      <!-- Main Application Form Card -->
      <div class="card">
        <h2 style="margin-top: 0; margin-bottom: 24px; font-family: Lora, serif;">Application Form</h2>

        <!-- IMPORTANT: action points to your Formspree endpoint -->
        <form id="applyForm" method="POST" action="https://formspree.io/f/xovkjzvn" enctype="multipart/form-data" novalidate>
          <div class="field-row" style="display:flex; gap:20px; flex-wrap:wrap;">
            <div class="field" style="flex:1; min-width:200px;">
              <label for="fullName">Full Name *</label>
              <input id="fullName" name="fullName" type="text" required placeholder="Jane Doe" autocomplete="name">
            </div>

            <div class="field" style="flex:1; min-width:200px;">
              <label for="email">Email Address *</label>
              <input id="email" name="email" type="email" required placeholder="you@example.com" autocomplete="email">
            </div>
          </div>

          <div class="field-row" style="display:flex; gap:20px; flex-wrap:wrap; margin-top:16px;">
            <div class="field" style="flex:1; min-width:200px;">
              <label for="phone">Phone (optional)</label>
              <input id="phone" name="phone" type="tel" placeholder="(xxx) xxx-xxxx" autocomplete="tel">
            </div>

            <div class="field" style="flex:1; min-width:200px;">
              <label for="position">Position Applying For *</label>
              <input id="position" name="position" type="text" required placeholder="e.g., Clinical Intern, Front Desk">
            </div>
          </div>

          <div class="field" style="margin-top:16px;">
            <label for="availability">Availability</label>
            <input id="availability" name="availability" type="text" placeholder="Weekday mornings, evenings, weekends, etc.">
            <div class="field-help">Let us know your preferred days and times.</div>
          </div>

          <div class="field" style="margin-top:16px;">
            <label for="cover">Cover Letter / Message *</label>
            <textarea id="cover" name="cover" required rows="6" placeholder="Tell us about your experience and why you'd like to join Miles 2 Wisdom."></textarea>
          </div>

          <div class="field" style="margin-top:16px;">
            <label for="resume">Upload Resume (PDF, DOCX) — optional</label>
            <input id="resume" name="resume" type="file" accept=".pdf,.doc,.docx" class="file-input" aria-describedby="resumeHelp">
            <div id="resumeHelp" class="file-info">Max file size: 5 MB. Accepted: .pdf, .doc, .docx</div>
            <div id="fileError" class="error-text" role="alert" style="display:none;"></div>
          </div>

          <div class="field checkbox-field" style="margin-top:16px;">
            <label class="checkbox-label">
              <input id="consent" name="consent" type="checkbox" required>
              <span class="checkbox-text">I consent to Miles 2 Wisdom contacting me about this application. I understand this may include a background check if required for the position.</span>
            </label>
          </div>

          <!-- Optional honeypot for bots (commented out). To enable, uncomment the div below.
               When active: if the `hp_field` has any value, the script will treat it as spam and not submit.
          -->
          <!--
          <div style="display:none;">
            <label>Leave this field empty<input type="text" name="hp_field" id="hp_field" tabindex="-1" autocomplete="off"></label>
          </div>
          -->

          <!-- Hidden metadata -->
          <input type="hidden" name="_subject" value="New job application — Miles 2 Wisdom">
          <input type="hidden" name="_form" value="apply-now">
          <input type="hidden" name="_replyto" id="_replyto" value="">

          <div class="button-row" style="margin-top:20px; display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
            <button type="submit" class="submit-btn">Submit Application</button>
            <a href="mailto:wisemoson@gmail.com" class="btn btn-alt">Email Resume</a>
            <div id="formStatus" class="small-note" aria-live="polite" style="margin-left:8px;"></div>
          </div>

          <!-- Success Message -->
          <div id="formSuccess" class="success-card" role="status" aria-live="polite" style="margin-top:20px;">
            <h3>Thank you — we've received your application!</h3>
            <p>Your application has been submitted successfully. We'll review it and contact you if your qualifications are a match for our current openings.</p>
          </div>

          <!-- Error Message -->
          <div id="formError" class="error-card" role="alert" aria-live="assertive" style="margin-top:20px;">
            <h3>Submission Error</h3>
            <p>There was a problem submitting your application. Please try again, check your file size/type, or email your resume to <strong>wisemoson@gmail.com</strong>.</p>
          </div>
        </form>
      </div>

      <!-- Sidebar Card -->
      <aside class="card sidebar-card">
        <h3 style="margin-top: 0; font-family: Lora, serif;">Why Join Us?</h3>

        <div class="info-section">
          <h4>Our Culture</h4>
          <p>We foster a collaborative, supportive environment where every team member can grow professionally while making a meaningful impact.</p>
        </div>

        <div class="info-section">
          <h4>Benefits</h4>
          <ul>
            <li>Competitive compensation</li>
            <li>Professional development opportunities</li>
            <li>Flexible scheduling options</li>
            <li>Supportive team environment</li>
          </ul>
        </div>

        <div class="info-section">
          <h4>Current Openings</h4>
          <p>We're always accepting applications for:</p>
          <ul>
            <li>Licensed Clinical Social Workers</li>
            <li>Clinical Interns</li>
            <li>Administrative Support</li>
            <li>Front Desk Staff</li>
          </ul>
        </div>

        <div class="info-section">
          <h4>Questions?</h4>
          <p>Contact us at <strong>(910) 759-3330</strong> or email <strong>Miles2Wisdom@gmail.com</strong> for more information.</p>
        </div>
      </aside>
    </div>
  </div>
</main>

<!-- CTA Bar -->
<section class="cta-bar">
  <div class="cta-container">
    <div class="cta-section">
      <h3>Book A Consultation</h3>
      <p>CALL US AT <strong> (910) 759-3330 </strong> OR <strong> BOOK ONLINE </strong> USING THE BUTTON BELOW.</p>
      <a href="book-a-consultation.html" class="btn">Book A Consultation</a>
    </div>
    <div class="cta-divider"></div>
    <div class="cta-section">
      <h3>Join Us</h3>
      <p>WE ARE ALWAYS LOOKING FOR INCREDIBLE PEOPLE TO JOIN OUR TEAM!</p>
      <a href="apply-now.html" class="btn">Apply Now</a>
    </div>
  </div>
</section>

<!-- Footer -->
<footer>
  <div class="container footgrid">
    <div>
      <strong>Miles 2 Wisdom Counseling Services, LLC</strong>
      <p class="disclaimer">Not a crisis service. Call 911 or 988 in emergencies.</p>
    </div>
    <div>
      <strong>Navigate</strong>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="services.html">Services</a></li>
      </ul>
    </div>
    <div>
      <strong>Connect</strong>
      <ul>
        <li><a href="https://www.facebook.com/Miles2Wisdom" target="_blank">Facebook</a></li>
        <li><a href="#">LinkedIn</a></li>
      </ul>
    </div>
    <div class="footer-logo">
      <img src="Logo.jpg" alt="Miles 2 Wisdom Logo">
    </div>
    <div class="footer-copyright subtle">
      © <span id="year"></span> Miles 2 Wisdom Counseling Services, LLC.
    </div>
  </div>
</footer>

<!-- JavaScript -->
<script>
/* ---------------------------
   UI: header/menu, shrink, cards
   (keeps your visual behavior)
   --------------------------- */
(() => {
  const menuBtn = document.querySelector('.menu-btn');
  const menu = document.querySelector('nav ul');

  if (menuBtn && menu) {
    menuBtn.addEventListener('click', () => {
      const isOpen = menu.classList.toggle('open');
      menuBtn.textContent = isOpen ? '✕' : '☰';
      menuBtn.setAttribute('aria-expanded', isOpen);
    });

    document.addEventListener('click', (e) => {
      if (!menuBtn.contains(e.target) && !menu.contains(e.target)) {
        menu.classList.remove('open');
        menuBtn.textContent = '☰';
        menuBtn.setAttribute('aria-expanded', 'false');
      }
    });
  }

  const header = document.querySelector('header');
  let lastKnownScrollY = 0;
  let ticking = false;
  const SHRINK_THRESHOLD = 80;
  const EXPAND_THRESHOLD = 40;

  function updateHeader() {
    const currentY = lastKnownScrollY;
    if (currentY >= SHRINK_THRESHOLD && !header.classList.contains('shrink')) {
      header.classList.add('shrink');
    } else if (currentY <= EXPAND_THRESHOLD && header.classList.contains('shrink')) {
      header.classList.remove('shrink');
    }
    ticking = false;
  }
  window.addEventListener('scroll', () => {
    lastKnownScrollY = window.scrollY;
    if (!ticking) {
      window.requestAnimationFrame(updateHeader);
      ticking = true;
    }
  }, { passive: true });

  // card reveal
  const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' };
  const cardObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) entry.target.classList.add('visible');
    });
  }, observerOptions);
  document.querySelectorAll('.card').forEach(card => cardObserver.observe(card));

  // set year
  const yearElement = document.getElementById('year');
  if (yearElement) yearElement.textContent = new Date().getFullYear();
})();

/* ---------------------------
   Apply Form: submit to Formspree
   - validates file type/size (5MB)
   - fills _replyto
   - shows success/error UI
   --------------------------- */
(() => {
  const form = document.getElementById('applyForm');
  if (!form) return;

  const resumeInput = document.getElementById('resume');
  const fileError = document.getElementById('fileError');
  const replyTo = document.getElementById('_replyto');
  const formStatus = document.getElementById('formStatus');
  const successCard = document.getElementById('formSuccess');
  const errorCard = document.getElementById('formError');
  const submitBtn = form.querySelector('.submit-btn');

  // Config: allowed types and max size (bytes)
  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5 MB
  const ALLOWED_TYPES = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];

  // Validate file client-side (optional but user-friendly)
  function validateFile() {
    fileError.style.display = 'none';
    if (!resumeInput || !resumeInput.files || resumeInput.files.length === 0) return true;
    const file = resumeInput.files[0];
    if (file.size > MAX_FILE_SIZE) {
      fileError.textContent = 'File is too large. Max size is 5 MB.';
      fileError.style.display = 'block';
      return false;
    }
    if (!ALLOWED_TYPES.includes(file.type)) {
      // Some browsers don't set mime-type for .doc/.docx reliably; check extension fallback
      const name = file.name.toLowerCase();
      if (!name.endsWith('.pdf') && !name.endsWith('.doc') && !name.endsWith('.docx')) {
        fileError.textContent = 'Invalid file type. Accepts PDF, DOC, DOCX.';
        fileError.style.display = 'block';
        return false;
      }
    }
    return true;
  }

  // live validation for resume
  if (resumeInput) {
    resumeInput.addEventListener('change', validateFile);
  }

  // helper to show success
  function showSuccess() {
    if (successCard) {
      successCard.classList.add('visible');
      successCard.setAttribute('aria-hidden', 'false');
      // hide form after small delay to show animation
      setTimeout(() => { form.style.display = 'none'; successCard.scrollIntoView({ behavior: 'smooth', block: 'center' }); }, 180);
    }
    if (errorCard) { errorCard.classList.remove('visible'); errorCard.style.display = 'none'; }
  }

  // helper to show error
  function showError(message) {
    if (errorCard) {
      errorCard.classList.add('visible');
      errorCard.style.display = 'block';
      errorCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
    if (message && formStatus) {
      formStatus.textContent = message;
      formStatus.className = 'small-note error-text';
    }
  }

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // client-side validity
    if (!form.checkValidity()) {
      form.reportValidity();
      return;
    }

    // optional honeypot check (if you uncomment honeypot input)
    const hp = form.querySelector('input[name="hp_field"]');
    if (hp && hp.value.trim() !== '') {
      // treat as spam
      console.warn('Honeypot triggered — possible spam.');
      return;
    }

    // file validation
    if (!validateFile()) {
      showError('Please fix file upload error.');
      return;
    }

    // set replyto for Formspree
    const emailVal = (document.getElementById('email') || {}).value || '';
    if (replyTo) replyTo.value = emailVal.trim();

    // disable submit
    const originalText = submitBtn ? submitBtn.textContent : 'Submit Application';
    if (submitBtn) { submitBtn.disabled = true; submitBtn.textContent = 'Sending...'; }

    // prepare FormData
    const fd = new FormData(form);

    try {
      const resp = await fetch(form.action, {
        method: 'POST',
        body: fd,
        headers: { 'Accept': 'application/json' }
      });

      if (resp.ok) {
        // success
        if (formStatus) { formStatus.textContent = 'Application submitted.'; formStatus.className = 'small-note'; }
        showSuccess();
        form.reset(); // reset local form
      } else {
        // try parse JSON error
        let body = null;
        try { body = await resp.json(); } catch (err) { /* ignore */ }
        const errMsg = body && body.error ? body.error : `Server error (${resp.status})`;
        showError(errMsg);
      }
    } catch (err) {
      console.error('Apply form submit error', err);
      showError('Network error — please try again.');
    } finally {
      if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = originalText; }
    }
  });

  // small UX: clear status on input change
  form.addEventListener('input', () => {
    if (formStatus) { formStatus.textContent = ''; formStatus.className = 'small-note'; }
    if (fileError) { fileError.style.display = 'none'; }
  });

  // accessible live-feedback when required fields change
  const requiredInputs = form.querySelectorAll('input[required], textarea[required]');
  requiredInputs.forEach(input => {
    input.addEventListener('blur', function () {
      if (this.checkValidity()) { this.classList.remove('error'); this.classList.add('valid'); }
      else { this.classList.remove('valid'); this.classList.add('error'); }
    });
  });

})();
</script>

</body>
</html>
